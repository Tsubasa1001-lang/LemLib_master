# LemLib é‹å‹•æ§åˆ¶

> **å°ˆæ¡ˆåç¨±**: LemLib_1009  
> **ç‰ˆæœ¬**: 0.6.0  
> **ç›®æ¨™å¹³å°**: VEX V5

---

## é‹å‹•æ§åˆ¶æŒ‡ä»¤

### `moveToPoint`
```cpp
void moveToPoint(units::V2Position target, Time timeout,
                 MoveToPointParams params = {},
                 MoveToPointSettings settings = {});
```
å°‡æ©Ÿå™¨äººç§»å‹•åˆ°æŒ‡å®š `(x, y)`ã€‚å¸¸ç”¨åƒæ•¸ï¼š
```cpp
struct MoveToPointParams {
    bool reversed = false;
    Number maxLateralSpeed = 1;
    Number minLateralSpeed = 0;
    Number maxAngularSpeed = 1;
    Number lateralSlew = lateral_slew;
    Number angularSlew = angular_slew;
    Length earlyExitRange = 0_in;
};
```
ç¯„ä¾‹ï¼š
```cpp
lemlib::moveToPoint({24_in, 24_in}, 5_sec, {}, {});
params.maxLateralSpeed = 0.8;
params.minLateralSpeed = 0.3;
params.reversed = true;
lemlib::moveToPoint({0_in, 0_in}, 5_sec, params, {});
```

### `moveToPose`
```cpp
void moveToPose(units::Pose target, Time timeout,
                MoveToPoseParams params = {},
                MoveToPoseSettings settings = {});
```
æ”¯æŒ leadã€driftCompensation ç­‰è¨­å®šä»¥æ§åˆ¶è½‰å‘æå‰é‡èˆ‡è£œå„Ÿã€‚

### `turnTo`
```cpp
void turnTo(std::variant<Angle, V2Position> target, Time timeout,
            TurnToParams params = {},
            TurnToSettings settings = {});
```
å¯æŒ‡å®šç›®æ¨™è§’åº¦æˆ–ä½ç½®ã€‚`TurnToParams` å¯é™åˆ¶æœ€å¤§é€Ÿåº¦ã€å¼·åˆ¶é †/é€†æ™‚é‡ã€é–å®šå´ï¼ˆPivotï¼‰ã€‚

---

## PID æ§åˆ¶å™¨

```cpp
lemlib::PID pid({0.6, 0.1, 0.04}, // kP, kI, kD
                0.0,              // ç©åˆ†ä¸Šé™
                1.0);             // è¼¸å‡ºä¸Šé™
```

å¸¸ç”¨æ–¹æ³•ï¼š
- `update(Number error)`: å›å‚³èª¿ç¯€è¼¸å‡º
- `reset()`: æ¸…é™¤ç©åˆ†/å¾®åˆ†
- `setGains(const Gains& gains)` / `getGains()`: å‹•æ…‹èª¿æ•´
- `setIntegralLimit(Number limit)`: é™åˆ¶ç©åˆ†é£½å’Œ

ç¯„ä¾‹ï¼š
```cpp
pid.reset();
lemlib::Gains newGains = {0.8, 0.15, 0.03};
pid.setGains(newGains);
Number out = pid.update(currentError);
```

---

## é‡Œç¨‹è¨ˆç³»çµ±

### å»ºç«‹
```cpp
lemlib::TrackingWheelOdometry odom(
    {&imu},
    {&vertical_tracker},
    {&horizontal_tracker});
```

### æ–¹æ³•
- `startTask(Time period = 10_msec)`: å•Ÿå‹•èƒŒæ™¯ä»»å‹™
- `stopTask()`: åœæ­¢æ›´æ–°
- `setPose(units::Pose pose)`: è¨­ç½®ç•¶å‰ä½ç½®
- `getPose()`: å–å¾—ä¼°æ¸¬å§¿æ…‹

é¡¯ç¤ºç¯„ä¾‹ï¼š
```cpp
odom.startTask();
pros::Task([] {
    while (true) {
        auto p = odom.getPose();
        pros::lcd::print(0, "X: %.2f in", to_in(p.x));
        pros::lcd::print(1, "Y: %.2f in", to_in(p.y));
        pros::lcd::print(2, "Î¸: %.2f deg", to_cDeg(p.orientation));
        pros::delay(50);
    }
});
```

---

æœ¬æª”æ¶µè“‹ç›®éŒ„ä¸­ã€ŒğŸ® é‹å‹•æ§åˆ¶ã€çš„ä¸‰å¤§ç« ç¯€ï¼šé‹å‹•æŒ‡ä»¤ã€PID æ§åˆ¶å™¨ã€é‡Œç¨‹è¨ˆç³»çµ±ã€‚
