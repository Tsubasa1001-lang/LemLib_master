# LemLib å¯¦ç”¨ç¯„ä¾‹

> **å°ˆæ¡ˆåç¨±**: LemLib_1009  
> **ç‰ˆæœ¬**: 0.6.0  
> **ç›®æ¨™å¹³å°**: VEX V5

---

## åˆå§‹åŒ–åºåˆ—

```cpp
void initialize() {
    terminal.setLoggingLevel(logger::Level::DEBUG);

    pros::lcd::initialize();
    pros::lcd::print(0, "Initializing...");

    pros::lcd::print(1, "Calibrating IMU...");
    imu.calibrate();
    pros::delay(3200);
    if (imu.isCalibrated()) pros::lcd::print(1, "IMU Ready");

    odom.startTask();
    pros::delay(100);

    left_motors.setBrakeMode(lemlib::BrakeMode::BRAKE);
    right_motors.setBrakeMode(lemlib::BrakeMode::BRAKE);

    pros::Task([] {
        while (true) {
            auto p = odom.getPose();
            pros::lcd::print(3, "X: %.1f Y: %.1f", to_in(p.x), to_in(p.y));
            pros::lcd::print(4, "Heading: %.1f deg", to_cDeg(p.orientation));
            pros::delay(50);
        }
    });

    pros::lcd::print(2, "Init Complete!");
}
```

---

## è‡ªä¸»ç¨‹åºç¯„ä¾‹

```cpp
void autonomous() {
    odom.setPose({0_in, 0_in, 0_cDeg});
    pros::delay(100);

    lemlib::moveToPoint({24_in, 0_in}, 3_sec, {}, {});
    pros::delay(500);

    lemlib::turnTo(90_cDeg, 2_sec, {}, {});
    pros::delay(500);

    lemlib::moveToPoint({24_in, 24_in}, 3_sec, {}, {});
    pros::delay(500);

    lemlib::moveToPose({0_in, 24_in, 180_cDeg}, 5_sec, {}, {});
}
```

---

## æ‰‹å‹•æ§åˆ¶ç¯„ä¾‹

```cpp
void opcontrol() {
    pros::Controller controller(pros::E_CONTROLLER_MASTER);

    while (true) {
        int forward = controller.get_analog(pros::E_CONTROLLER_ANALOG_LEFT_Y);
        int turn = controller.get_analog(pros::E_CONTROLLER_ANALOG_RIGHT_X);

        Number left = (forward + turn) / 127.0;
        Number right = (forward - turn) / 127.0;

        left_motors.move(left);
        right_motors.move(right);

        if (controller.get_digital(pros::E_CONTROLLER_DIGITAL_A)) {
            left_motors.move(0.5);
            right_motors.move(0.5);
        }

        pros::delay(20);
    }
}
```

---

## æ„Ÿæ¸¬å™¨ç›£æ§

```cpp
void monitor() {
    while (true) {
        Temperature left_temp = left_motors.getTemperature();
        Temperature right_temp = right_motors.getTemperature();
        if (to_celsius(left_temp) > 55.0) {
            pros::lcd::print(5, "WARNING: Left motor hot!");
            left_motors.move(0);
        }

        Current left_current = left_motors.getCurrent();
        Current right_current = right_motors.getCurrent();
        pros::lcd::print(6, "Current: L=%.1fA R=%.1fA",
                         to_amp(left_current),
                         to_amp(right_current));

        if (imu.isConnected()) {
            Angle heading = imu.getHeading();
            pros::lcd::print(7, "Heading: %.1f deg", to_stDeg(heading));
        } else {
            pros::lcd::print(7, "IMU Disconnected!");
        }

        pros::delay(100);
    }
}
```

---

## éŒ¯èª¤è™•ç†

```cpp
void initializeSafe() {
    if (!left_motors.isConnected() || !right_motors.isConnected()) {
        pros::lcd::print(0, "ERROR: Motor disconnected!");
        return;
    }
    if (!imu.isConnected()) {
        pros::lcd::print(0, "ERROR: IMU not found!");
        return;
    }

    imu.calibrate();
    int timeout = 0;
    while (imu.isCalibrating() && timeout < 4000) {
        pros::delay(100);
        timeout += 100;
    }
    if (!imu.isCalibrated()) {
        pros::lcd::print(0, "ERROR: IMU calibration failed!");
        return;
    }

    pros::lcd::print(0, "All systems ready!");
}
```

---

## æ•¸æ“šè¨˜éŒ„

```cpp
void recordTrajectory() {
    std::vector<units::Pose> trajectory;

    pros::Task recorder([&] {
        while (true) {
            trajectory.push_back(odom.getPose());
            pros::delay(100);
        }
    });

    lemlib::moveToPoint({24_in, 24_in}, 5_sec, {}, {});

    recorder.remove();
    printf("Recorded %d points:\n", trajectory.size());
    for (const auto& pose : trajectory) {
        printf("%.2f, %.2f, %.2f\n",
               to_in(pose.x),
               to_in(pose.y),
               to_cDeg(pose.orientation));
    }
}
```

---

æ­¤æª”æ¶µè“‹ç›®éŒ„ä¸­çš„ã€ŒğŸ“š å¸¸ç”¨ç¨‹å¼ç¢¼ç¯„ä¾‹ã€å…§å®¹ã€‚
